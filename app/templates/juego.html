<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackjack</title>
    <style>
    

    body {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 40vh;
        margin-top: 40px;
    }

    .mesa {
    width: 1100px; /* Ancho del div */
    height: 700px; /* Alto del div */
    background-image: url('{{ url_for('static', filename='img/fondo2.png') }}'); /* Imagen de fondo */
    background-size: cover; /* Ajusta la imagen para cubrir el tamaño del div */
    background-position: center; /* Centra la imagen */
    background-repeat: no-repeat; /* Evita que la imagen se repita */
    border-radius: 15px; /* Bordes redondeados (opcional) */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5); /* Sombra para darle efecto */
    display: flex;
    justify-content: center; /* Centra el contenido dentro del div */
    align-items: center; /* Centra el contenido verticalmente */
    color: white; /* Texto blanco */
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7); /* Sombra en el texto */
    position: relative;
}

.jugador {
    position: absolute;
    
    top: 350px;  /* Distancia desde el borde superior del contenedor */
    left: 220px;  /* Distancia desde el borde izquierdo del contenedor */
    
    width: 300px;
    height: 50px;
}
.carta {
    width: 80px; /* Ajusta el tamaño de las cartas */
    border-radius: 8px;
    box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
    transition: transform 0.3s ease;
    margin-left: -65px;
}

.carta:hover {
    transform: scale(1.1) rotate(3deg);/* Efecto al pasar el cursor */
}


.cartaB {
    width: 80px; /* Ajusta el tamaño de las cartas */
    border-radius: 8px;
    box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
    transition: transform 0.3s ease;

}

.cartaB:hover {
    transform: scale(1.1) rotate(3deg);/* Efecto al pasar el cursor */
}
.ia1 {
    position: absolute;
    top: 450px;  /* Distancia desde el borde superior del contenedor */
    left: 560px;  /* Distancia desde el borde izquierdo del contenedor */
    width: 300px;
    height: 50px;
}

.infoIA1{
    position: absolute;
    top: 350px;  /* Distancia desde el borde superior del contenedor */
    left: 390px;  /* Distancia desde el borde izquierdo del contenedor */
    width: 300px;
    height: 50px;
    text-align: center;
}

.ia2 {
    position: absolute;
    top: 350px;  /* Distancia desde el borde superior del contenedor */
    left: 900px;  /* Distancia desde el borde izquierdo del contenedor */
    width: 300px;
    height: 50px;
}

.infoIA2{
    position: absolute;
    top: 250px;  /* Distancia desde el borde superior del contenedor */
    left: 730px;  /* Distancia desde el borde izquierdo del contenedor */
    width: 300px;
    height: 50px;
    text-align: center;
}

.banca {
    position: absolute;
    top: 200px;  /* Distancia desde el borde superior del contenedor */
    left: 470px;  /* Distancia desde el borde izquierdo del contenedor */
    width: 300px;
    height: 50px;
}

.infoBanca{
    position: absolute;
    top: 90px;  /* Distancia desde el borde superior del contenedor */
    left: 400px;  /* Distancia desde el borde izquierdo del contenedor */
    width: 300px;
    height: 50px;
    text-align: center;
}

.jugador-info {
    position: absolute;
    top: 210px;  /* Distancia desde el borde superior del contenedor */
    left: 20px;  /* Distancia desde el borde izquierdo del contenedor */
    border-radius: 10px;
    width: 380px;
    margin: 10px auto;
    text-align: center;
}

h2 {
    font-size: 1.5em;
    margin-bottom: 10px;
}

p {
    font-size: 1.1em;
    margin: 5px 0;
}

.botones {
    position: absolute;
    top: 490px;  /* Distancia desde el borde superior del contenedor */
    left: 70px;  /* Distancia desde el borde izquierdo del contenedor */
    width: 250px;
    height: 50px;
    border: 2px solid #333;  /* Color y grosor del borde alrededor del contenedor */
    border-radius: 10px;  /* Redondea las esquinas del contenedor */
    background-color: #2c2523;  /* Fondo gris claro del contenedor */
    display: flex;  /* Usamos flexbox para alinear los botones */
    justify-content: space-between;  /* Espaciado entre los botones */
    padding: 10px 10px;  /* Añadimos algo de espacio alrededor de los botones */
}

.botones button {
    background-color: #4CAF50;  /* Fondo verde para los botones */
    color: white;  /* Color del texto */
    border: 2px solid #4CAF50;  /* Borde del botón */
    border-radius: 8px;  /* Redondea las esquinas de los botones */
    padding: 10px 20px;  /* Añade algo de padding dentro de los botones */
    font-size: 16px;  /* Tamaño de fuente para los botones */
    cursor: pointer;  /* Cambia el cursor al pasar por encima */
    transition: background-color 0.3s;  /* Transición suave para el hover */
}

.botones button:hover {
    background-color: #45a049;  /* Cambio de color al pasar el cursor sobre el botón */
}
</style>
</head>
<body>

   <div class="mesa">

    <div class="jugador-info">
        <h2>Jugador: {{ jugadorNombre }}</h2>
        <p>Puntaje: {{ jugadorPuntaje }}</p>
        <p>Probabilidad de pasarse de 21 si pide otra carta: {{ jugadorProbabilidad }}%</p>
    </div>
        <div class="jugador">
            <!--
            Esta es la manera de iterar las cartas para mostrarlas
            -->
            {%for imagen in jugadorInterfaz.mano%}
                <img src="{{ url_for('static', filename='img/' + imagen.nombreArchivo) }}" alt="{{ imagen }}" class="carta">
            {% endfor %}

        </div>
        <div class="botones">
            <button onclick="window.location.href='/hit'">Pedir Carta</button>
            <button onclick="window.location.href='/stand'">Plantarse</button>
            {% if estadoJuego.finalizado %}
            <div class="mensaje-final">
                <h3>{{ estadoJuego.mensajeFinal }}</h3>
                <button onclick="window.location.href='/nuevaRonda'">Pedir Carta</button>
            </div>
            {% endif %}
        </div>
        
        <div class="infoIA1">
            <h2>Cold-lettuce</h2>
            <p>Puntaje: {{ ia1Puntaje }}</p>
        </div>
        <div class="ia1">
   
            {%for imagen in ia1.mano%}
                <img src="{{ url_for('static', filename='img/' + imagen.nombreArchivo) }}" alt="{{ imagen }}" class="carta">
            {% endfor %}
            
        </div>

        <div class="infoIA2">
            <h2>Pop-eye</h2>
            <p>Puntaje: {{ ia2Puntaje }}</p>
            </div>
        <div class="ia2">
            {%for imagen in ia2.mano%}
                <img src="{{ url_for('static', filename='img/' + imagen.nombreArchivo) }}" alt="{{ imagen }}" class="carta">
            {% endfor %}
            
        </div>

        <div class="infoBanca">
            <h2>Dealer: Serafino</h2>
            <p>Puntaje: {{ dealerPuntaje }}</p>
        </div>
        <div class="banca">
            {%for imagen in dealer%}
            <img src="{{ url_for('static', filename='img/' + imagen) }}" alt="{{ imagen }}" class="cartaB">
        {% endfor %}
        </div>
   </div>

   <div id="modalAcciones" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:white; padding:20px; border:1px solid black; box-shadow:0 0 10px rgba(0,0,0,0.5); z-index:1000;">
    <h2>Acciones realizadas</h2>
    <ul id="listaAcciones"></ul>
</div>

<script>
    // Función para mostrar las acciones en el modal
    function mostrarModalAcciones() {
        // Obtener las acciones directamente desde el objeto estadoJuego
        const acciones = {
            "ia1": "{{ estadoJuego['jugadaIA1'] }}",
            "ia2": "{{ estadoJuego['jugadaIA2'] }}",
            "dealer": "{{ estadoJuego['jugadaDealer'] }}"
        };
        
        // Actualizar el contenido del modal
        const listaAcciones = document.getElementById("listaAcciones");
        listaAcciones.innerHTML = ""; // Limpiar contenido previo

        // Agregar las acciones al modal
        for (const [key, accion] of Object.entries(acciones)) {
            const li = document.createElement("li");
            li.textContent = `${key.toUpperCase()}: ${accion}`;
            listaAcciones.appendChild(li);
        }

        // Mostrar el modal
        const modal = document.getElementById("modalAcciones");
        modal.style.display = "block";

        // Ocultar el modal después de unos segundos
        setTimeout(() => {
            modal.style.display = "none";
        }, 8000); // 5 segundos
    }

    // Mostrar el modal automáticamente después de cargar la página
    window.onload = function() {
        mostrarModalAcciones();
    };
</script>
</body>
</html>
